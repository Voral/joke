# Сравнение с существующими решениями

Многие спрашивают: *«Чем Joke отличается от Laravel, Symfony или Slim?»*.
Ответ кроется не в функциональности (Joke сознательно беднее), а в **архитектурном подходе** и **степени абстракции**.

Joke не пытается конкурировать с «гигантами» по количеству фич.

## 1. Система сервис-провайдеров

Это, пожалуй, самое заметное архитектурное отличие.

| Характеристика            | Laravel / Другие                                                                                                       | Joke                                                                                                                                      |
|:--------------------------|:-----------------------------------------------------------------------------------------------------------------------|:------------------------------------------------------------------------------------------------------------------------------------------|
| **Типизация провайдеров** | Строгое разделение: `ServiceProvider` (обычный) и `DeferredServiceProvider` (отложенный). Требуются разные интерфейсы. | **Единый контракт.** Любой класс, реализующий `ServiceProviderInterface`, может быть обычным или отложенным.                              |
| **Стратегия загрузки**    | Определяется кодом класса (реализацией интерфейса). Чтобы изменить стратегию, нужно менять код класса.                 | Определяется **конфигурацией**. Вы решаете, куда поместить класс: в массив `$providers` или `$deferredProviders`. Код класса не меняется. |
| **Гибкость**              | Низкая. Класс «зашит» на быть отложенным или нет.                                                                      | Высокая. Один и тот же провайдер можно тестировать как обычный, а в продакшене использовать как отложенный, просто поменяв конфиг.        |
| **Сложность**             | Выше. Нужно помнить о двух типах классов и правилах их регистрации.                                                    | Ниже. Одна сущность для всех случаев жизни.                                                                                               |

**Почему это важно:** В Joke мы показываем, что «ленивая загрузка» — это паттерн управления жизненным циклом контейнера,
а не неизменное свойство самого класса.

## 2. Типизированная система конфигурации

Второе ключевое отличие — подход к хранению и доступу к настройкам. В то время как многие фреймворки полагаются на
глобальные функции-хелперы (`config()`) или работу с многомерными массивами по строковым ключам, Joke продвигает идею 
**строгой типизации** и **объектной модели** даже для конфигов.

| Характеристика         | Laravel / Symfony / Slim                                                                                                     | Joke                                                                                                                            |
|:-----------------------|:-----------------------------------------------------------------------------------------------------------------------------|:--------------------------------------------------------------------------------------------------------------------------------|
| **Доступ к значениям** | Часто через строковые ключи: `config('database.default')`. Ошибка в имени ключа выявляется только в рантайме.                | Через методы объектов: `$config->getDatabaseDefault()`. Ошибки отлавливаются статическим анализом (PHPStan/Psalm) и IDE.        |
| **Структура данных**   | Преимущественно ассоциативные массивы. Сложно понять, какие поля обязательны, а какие нет, без чтения документации или кода. | Специализированные DTO-классы (например, `ApplicationConfig`, `DatabaseConfig`). Структура явно описана в типах свойств класса. |
| **Зависимости**        | Конфигурация часто доступна глобально или через сервис-локатор, что усложняет тестирование изолированных компонентов.        | Конфигурация внедряется через DI-контейнер как обычный сервис. Компонент явно декларирует: «Мне нужен объект `RouteConfig`».    |
| **Безопасность типов** | Слабая. Можно случайно передать строку туда, где ожидается число, если валидация не настроена отдельно.                      | Сильная. Конструктор конфига гарантирует, что все поля имеют корректный тип еще до начала работы приложения.                    |

**Почему это важно:**
Я решил действовать в парадигме, что конфигурация — это часть кода, а не просто набор данных.

* **Refactoring-safe:** Если вы переименуете поле в классе конфига, IDE подсветит все места использования. В массивах вы
  узнаете об ошибке только когда приложение упадет на продакшене.
* **Самодокументируемость:** Заглянув в класс `ApplicationConfig`, разработчик сразу видит весь список доступных
  настроек и их типы. Не нужно гадать, какой ключ использовать: `'app.debug'`, `'application.debugging'` или
  `'debug.mode'`.
* **Чистота кода:** Убирается необходимость в «магических строках» повсюду в проекте.

## Резюме: Когда выбирать что?

### Выбирайте Laravel / Symfony, если:

* Вам нужно запустить коммерческий проект **быстро**.
* Вам нужны готовые решения для аутентификации, очередей, событий, API-ресурсов.
* Вы не хотите писать код для типовых задач (CRUD, миграции).
* Вам важна поддержка сообщества и тысячи готовых пакетов.

### Когда может быть полезен Joke?

Joke — это не замена Laravel для большого проекта. Это инструмент для других задач:

* **Тестирование гипотез и архитектурных решений.**
  Хотите проверить, как будет работать ваш собственный механизм кэширования, альтернативный роутер или специфичная
  система прав доступа? В Joke нет жесткого ядра, которое будет сопротивляться. Вы можете внедрить свое решение вместо
  стандартного и сразу увидеть результат в боевом (пусть и маленьком) окружении.

* **Легковесная основа для внутренних утилит и микросервисов.**
  Если вам нужно поднять простой API-шлюз, воркер очереди, консольную утилиту или демон, которому не нужны ORM, миграции
  и сложная аутентификация, Joke даст вам необходимый минимум (роутинг, DI, конфиги) без лишнего багажа зависимостей и
  памяти.

* **Полный контроль над каждым байтом кода.**
  В больших фреймворках вы часто вынуждены мириться с чужими решениями или писать сложные обходные пути. В Joke вы
  знаете каждую строчку кода. Если вам не нравится реализация middleware — вы меняете её за 5 минут, не ломая
  совместимость с десятками других пакетов.

* **Изолированная среда для отладки сложных проблем.**
  Столкнулись со странной ошибкой в графе зависимостей или циклической ссылкой в большом проекте? Воспроизведите
  минимальную ситуацию в Joke. Благодаря прозрачности кода найти корень проблемы здесь гораздо быстрее, чем дебажить
  тысячи строк чужого кода.

* **База для собственных специализированных решений.**
  Планируете написать свой CMS-движок, фреймворк для телеграм-ботов или систему обработки данных? Возьмите Joke за
  фундамент. Вам не придется вырезать лишнее из «комбайна» — у вас уже есть чистое ядро, которое можно наращивать только
  теми компонентами, которые нужны именно вам.


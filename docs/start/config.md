# Конфигурация

## Конфигурация окружения

Фреймворк поддерживает конфигурирование зависимое от окружения выполнения. Для реализации этого Joke использует
.env-файлы.

### Определение текущего окружения

Текущее окружение определяется из источников (в порядке приоритета):

- $_ENV['JK_ENV']
- $_SERVER['JK_ENV']
- getenv('JK_ENV')

В случае, если данная переменная не задана, текущее окружение считается 'local'

### Стандартные наименования окружений

В фреймворке определены стандартные наименования для некоторых окружений

- Environment::ENV_PRODUCTION = 'production' - продуктовое окружение
- Environment::ENV_DEVELOPMENT = 'development' - окружение для разработки
- Environment::ENV_TESTING = 'testing' - тестовое окружение
- Environment::ENV_LOCAL = 'local' - окружение по умолчанию

### Порядок загрузки .env-файлов

1. `.env` - базовый файл, общий для всех окружений
2. `.env.{JK_ENV}` - файл, специфичный для текущего окружения (.env.local, .env.production), кроме .env.local
3. `.env.local` - файл для локальных переопределений, который всегда загружается последним (и перезаписывает любые
   значения), кроме случая, когда текущее окружение — testing.

> Важно!  
> Файлы загружаются последовательно, и последующие перезаписывают значения из предыдущих

> Важно!!!
> Никогда не коммитьте .env.local или .env с секретами в систему контроля версий! Используйте .env.example как шаблон
> для новых разработчиков

### Поддерживаемые типы значений

| Запись в .env файлe  | Интерпретация            |
|----------------------|--------------------------|
| `PROP=1`             | целое число              |
| `PROP=1.2`           | число с плавающей точкой |
| `PROP=1e2`           | число с плавающей точкой |
| `PROP=1E2`           | число с плавающей точкой |
| `PROP=1.1.1.1`       | строка                   |
| `PROP=true`          | boolean, true            |
| `PROP=false`         | boolean, false           |
| `PROP=null`          | null                     |
| `PROP=`              | null                     |
| `PROP`               | null                     |
| `PROP=Hello world`   | строка                   |
| `PROP="Hello world"` | строка                   |
| `PROP='Hello world'` | строка                   |

В строках обрамленных кавычками допустимо экранирование
`PROP="Hello \"world\""` - переменная будет иметь значение `Hello "world"`
`PROP='Hello \'world\''` - переменная будет иметь значение `Hello 'world'`

